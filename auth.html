<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZERIONX1 Â· Institutional Terminal</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
body{
    background:#080B12;
    font-family:Inter,system-ui;
    color:#EDF2F7;
}

/* Glass Card */
.card{
    background:#12171E;
    border:1px solid #2A3442;
    border-radius:28px;
    box-shadow:0 30px 50px rgba(0,0,0,.8);
}

/* Inputs */
.input{
    background:#10161E;
    border:1.5px solid #262E38;
    border-radius:14px;
    transition:.2s;
}
.input:focus-within{
    border-color:#C19A5B;
    box-shadow:0 0 0 2px rgba(193,154,91,.25);
}

/* Button */
.gold{
    background:linear-gradient(145deg,#E4B544,#B4842C);
    color:#0B0F15;
    font-weight:700;
    letter-spacing:.12em;
    border-radius:18px;
    transition:.25s;
}
.gold:hover{ transform:translateY(-2px); }

.tab{
    flex:1;
    padding-bottom:10px;
    color:#6F7A8A;
    border-bottom:2px solid transparent;
}
.tab-active{
    color:#D4AF37;
    border-bottom:2px solid #D4AF37;
}
</style>
</head>

<body class="flex items-center justify-center min-h-screen p-6">

<div class="card w-full max-w-md p-8">

<!-- HEADER -->
<div class="text-center mb-8">
<h1 class="text-3xl font-black">
ZERION<span class="text-[#C19A5B]">X1</span>
</h1>
<p class="text-xs text-gray-500">Secure Institutional Gateway</p>
</div>

<!-- TABS -->
<div class="flex border-b border-gray-800 mb-6">
<button id="login-tab" class="tab tab-active"
onclick="toggleForm('login')">LOGIN</button>

<button id="signup-tab" class="tab"
onclick="toggleForm('signup')">CREATE ACCOUNT</button>
</div>

<div id="message"
class="hidden mb-5 text-xs text-center p-3 rounded-xl"></div>

<!-- LOGIN -->
<form id="login-form" class="space-y-4">

<div class="input flex items-center px-4 py-3">
<i class="fa-regular fa-envelope text-gray-500 mr-3"></i>
<input id="login-email" type="email"
placeholder="Email"
class="bg-transparent outline-none w-full" required>
</div>

<div class="input flex items-center px-4 py-3">
<i class="fa-solid fa-lock text-gray-500 mr-3"></i>

<input id="login-password" type="password"
placeholder="Password"
class="bg-transparent outline-none w-full" required>

<i class="fa-regular fa-eye cursor-pointer text-gray-400"
onclick="togglePassword('login-password',this)"></i>
</div>

<button id="login-btn"
class="gold w-full py-4 mt-3">
ENTER TERMINAL
</button>

</form>

<!-- SIGNUP -->
<form id="signup-form" class="space-y-4 hidden">

<div class="input flex px-4 py-3">
<input id="sig-name" placeholder="Full Name"
class="bg-transparent outline-none w-full" required>
</div>

<div class="input flex px-4 py-3">
<input id="sig-phone" placeholder="Phone"
class="bg-transparent outline-none w-full" required>
</div>

<div class="input flex px-4 py-3">
<input id="sig-email" type="email"
placeholder="Email"
class="bg-transparent outline-none w-full" required>
</div>

<div class="input flex items-center px-4 py-3">
<input id="sig-password" type="password"
placeholder="Password"
class="bg-transparent outline-none w-full" required>

<i class="fa-regular fa-eye cursor-pointer text-gray-400"
onclick="togglePassword('sig-password',this)"></i>
</div>

<div class="input flex px-4 py-3">
<input id="sig-ref" placeholder="Referral (optional)"
class="bg-transparent outline-none w-full">
</div>

<button id="signup-btn"
class="gold w-full py-4">
CREATE ACCOUNT
</button>

</form>

</div>

<script>

/* ================= SUPABASE INIT ================= */

const supabaseClient = supabase.createClient(
'https://dpmqjvaylnszykujmufv.supabase.co',
'sb_publishable_S2HHT0VP1Ru6Dk63ju7V-Q_FnNfX1sd'
);

const msg=document.getElementById("message");

/* ================= SESSION AUTO REDIRECT ================= */

async function checkSession(){
const {data:{session}} =
await supabaseClient.auth.getSession();

if(session){
window.location.replace("dashboard.html");
}
}

checkSession();

supabaseClient.auth.onAuthStateChange((event,session)=>{
if(session){
window.location.replace("dashboard.html");
}
});

/* ================= UI HELPERS ================= */

function showAlert(text,error=false){
msg.classList.remove("hidden");
msg.innerText=text;
msg.className=`mb-5 p-3 rounded-xl text-xs ${
error?"bg-red-900/30 text-red-400":
"bg-green-900/30 text-green-400"
}`;
}

function togglePassword(id,icon){
const input=document.getElementById(id);
if(input.type==="password"){
input.type="text";
icon.classList.replace("fa-eye","fa-eye-slash");
}else{
input.type="password";
icon.classList.replace("fa-eye-slash","fa-eye");
}
}

function toggleForm(type){
login-form.classList.toggle("hidden",type!=="login");
signup-form.classList.toggle("hidden",type!=="signup");

login-tab.className="tab "+(type==="login"?"tab-active":"");
signup-tab.className="tab "+(type==="signup"?"tab-active":"");

msg.classList.add("hidden");
}

/* ================= SIGNUP ================= */

signup-form.addEventListener("submit",async(e)=>{
e.preventDefault();

signup-btn.disabled=true;
signup-btn.innerText="CREATING...";

const {error}=await supabaseClient.auth.signUp({
email:sig-email.value,
password:sig-password.value,
options:{
data:{
full_name:sig-name.value,
phone:sig-phone.value,
referral_code:sig-ref.value || null
}
}
});

if(error){
showAlert(error.message,true);
signup-btn.disabled=false;
signup-btn.innerText="CREATE ACCOUNT";
return;
}

showAlert("Verification email sent. Login after confirming.");
signup-btn.innerText="ACCOUNT CREATED";
});

/* ================= LOGIN ================= */

login-form.addEventListener("submit",async(e)=>{
e.preventDefault();

login-btn.disabled=true;
login-btn.innerText="AUTHENTICATING...";

const {error}=await supabaseClient.auth.signInWithPassword({
email:login-email.value.trim(),
password:login-password.value.trim()
});

if(error){
showAlert(error.message,true);
login-btn.disabled=false;
login-btn.innerText="ENTER TERMINAL";
return;
}

showAlert("Access granted. Loading terminal...");

/* redirect handled automatically by auth listener */
});

</script>

</body>
</html>
